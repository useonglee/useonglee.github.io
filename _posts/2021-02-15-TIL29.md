---
layout: post
title: "ğŸ“… TIL #29"
subtitle: "ì¬ê·€í•¨ìˆ˜ë¡œ stringify-JSON ë° tree-UI êµ¬í˜„"
toc: true
toc_sticky: true
toc_label: "í˜ì´ì§€ ì£¼ìš” ëª©ì°¨"
date: 2021-02-15
background: "/img/posts/post-TIL.png"
tags: [TIL, pre-course, js]
---

<br/>

## ğŸ‘‰ JSON ì´ë€?

<br/>

JSONì´ë€, JSON(JavaScript Object Notation)ì˜ ì•½ìë¡œ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">Javascript ê°ì²´ ë¬¸ë²•ìœ¼ë¡œ êµ¬ì¡°í™”ëœ ë°ì´í„°ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•œ</span> ë¬¸ì ê¸°ë°˜ì˜ í‘œì¤€ í¬ë§·ì´ë‹¤.
<br/>

**_ê·¸ëŸ¬ë©´ ì™œ JSONì„ ì•Œì•„ì•¼ í• ê¹Œ?_**

ì›¹ì—ì„œ ë°ì´í„°ë¥¼ ì „ì†¡ì„ í•´ì•¼í•  ë•Œ ì¼ë°˜ì ìœ¼ë¡œ JSONì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì´ë‹¤. (ì˜ˆë¥¼ë“¤ì–´, ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•´ì•¼í•˜ëŠ” ê²½ìš°)
<br/>

**_JSONì€ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?_**

<span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">JSONì€ ë¬¸ìì—´ í˜•íƒœë¡œ ì¡´ì¬í•œë‹¤.</span> Javascript ê°ì²´ ë¬¸ë²•ì„ ë”°ë¥´ëŠ” ë¬¸ìì—´ì´ê¸° ë•Œë¬¸ì—, ê¸°ë³¸ ë°ì´í„° íƒ€ì…ì¸ ë¬¸ìì—´, ìˆ«ì, ë°°ì—´, ë¶ˆë¦¬ì–¸ ê·¸ë¦¬ê³  ë‹¤ë¥¸ ê°ì²´ë“¤ë„ í¬í•¨í•  ìˆ˜ ìˆë‹¤.
<br/>

> **_JSON ì‚¬ìš©ë²•ì€?_**
---

ê°„ë‹¨í•œ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ë©´ì„œ ì´í•´ë¥¼ í•´ë³´ì.
<br/>

```js
const message = {
  sender: "ì´ìš°ì„±",
  receiver: "ë„¤ì´ë²„",
  message: "ì €ë¥¼ ë°ë ¤ê°€ì„¸ìš”!",
  createdAt: "2021-02-15 21:08:10"
};

let transferableMessage = JSON.stringify(message);

console.log(transferableMessage);
// {"sender":"ì´ìš°ì„±","receiver":"ë„¤ì´ë²„","message":"ì €ë¥¼ ë°ë ¤ê°€ì„¸ìš”!","createdAt":"2021-02-15 21:08:10"}
```

<br/>

ì´ëŸ°ì‹ìœ¼ë¡œ ì‚¬ìš©ë²•ì€ ì •ë§ ê°„ë‹¨í•˜ë‹¤. ê·¸ë¦¬ê³  stringifyí•˜ëŠ” ì´ ê³¼ì •ì„ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">ì§ë ¬í™”(serialize)</span>í•œë‹¤ê³  í•œë‹¤.

> Other notes

- ì°¸ê³ ë¡œ JSONì€ ì˜¤ì§ í”„ë¡œí¼í‹°ë§Œ ë‹´ì„ ìˆ˜ ìˆë‹¤. ë©”ì„œë“œëŠ” ë‹´ì„ ìˆ˜ ì—†ë‹¤.
- JSONì€ ë¬¸ìì—´ê³¼ í”„ë¡œí¼í‹°ì˜ ì´ë¦„ ì‘ì„±ì‹œ í° ë”°ì˜´í‘œë§Œì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì‘ì€ ë”°ì˜´í‘œëŠ” ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
- ì½¤ë§ˆë‚˜ ì½œë¡ ì„ ì˜ëª» ë°°ì¹˜í•˜ëŠ” ì‚¬ì†Œí•œ ì‹¤ìˆ˜ë¡œ ì¸í•´ JSONíŒŒì¼ì´ ì˜ëª»ë˜ì–´ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. JSONLintê°™ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©í•´ JSON ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.

<br/>

> **_ê·¸ë ‡ë‹¤ë©´ ë‹¤ì‹œ ê°ì²´ë¡œ ë³€í™˜ì€?_**
---

ì´ì œëŠ” ë¬¸ìì—´ ê·¸ ìì²´ë¡œ ëˆ„êµ°ê°€ì—ê²Œ ê°ì²´ ë‚´ìš©ì„ ë³´ë‚¼ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ìˆ˜ì‹ ìëŠ” ì´ ë©”ì‹œì§€ë¥¼ ì–´ë–»ê²Œ ë‹¤ì‹œ ê°ì²´ë¡œ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œ?

ê·¸ ì—­í• ì„ í•˜ëŠ” ê²ƒì´ ë°”ë¡œ parseí•˜ëŠ” ì´ ê³¼ì •ì„ ì—­ì§ë ¬í™”(deserialize)í•œë‹¤ê³  í•©ë‹ˆë‹¤.ì´ë‹¤.

```js
let packet = {sender: "ì´ìš°ì„±", receiver: "ë„¤ì´ë²„", message: "ì €ë¥¼ ë°ë ¤ê°€ì„¸ìš”!", createdAt: "2021-02-15 21:08:10"};

let obj = JSON.parse(packet);

console.log(obj);
/*  
{
  sender: "ì´ìš°ì„±",
  receiver: "ë„¤ì´ë²„",
  message: "ì €ë¥¼ ë°ë ¤ê°€ì„¸ìš”!",
  createdAt: "2021-02-15 21:08:10"
};
*/
```

<br/>

parseí•˜ëŠ” ì´ ê³¼ì •ì€ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">ì—­ì§ë ¬í™”(deserialize)</span>í•œë‹¤ê³  í•œë‹¤.

![serialize-deserialize-binary-tree](https://user-images.githubusercontent.com/75570915/107946040-d529c880-6fd3-11eb-84e9-64a3455abfa5.png)
<br/>

ì´ì²˜ëŸ¼, JSONì€ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ ì‚¬ì´ì—ì„œ ë°ì´í„°ë¥¼ êµí™˜í•˜ê¸° ìœ„í•œ í¬ë§·</span>ì´ë©°, <u>ë‹¨ìˆœíˆ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œë§Œ ì“°ì´ëŠ” ê²ƒì´ ì•„ë‹Œ</u>, ì—¬íƒ€ ë‹¤ë¥¸ ì–¸ì–´ì—ì„œë„ ë²”ìš©ì ìœ¼ë¡œ ì“°ì´ëŠ” ì•„ì£¼ ìœ ëª…í•œ í¬ë§·ì´ë‹¤.

<br/>
<br/>

## ğŸ‘‰ stringify-JSON êµ¬í˜„

ê·¸ëŸ¬ë©´ ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ì¬ê·€ë¥¼ ì‚¬ìš©í•´ì„œ JSONì„ êµ¬í˜„í•´ë³´ì! :punch: :punch: :punch:

<br/>

ë‚˜ëŠ” ë¨¼ì € ë°°ì—´(Array)ê³¼ ê°ì²´(Object) ê·¸ë¦¬ê³  ë‚˜ë¨¸ì§€ íƒ€ì…ë“¤, ì´ë ‡ê²Œ í¬ê²Œ ì„¸ê°€ì§€ë¡œ ë¶„ë¥˜ë¥¼ í•´ì„œ ìƒê°ì„ í–ˆë‹¤.

ì¸ìë¥¼ ë°›ì•˜ì„ ë•Œ ë¨¼ì € number, null, boolean, string íƒ€ì…ë“¤ì„ ë¬¸ìì—´ë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜í•´ì£¼ì—ˆë‹¤.

<br/>

```js
function stringifyJSON(obj) {
  //TODO: recursive base
  if (typeof obj === "number" || obj === null || typeof obj === "boolean") {
    return `${obj}`;
  } else if (typeof obj === "string") {
    return `"${obj}"`;       // ë¬¸ìì—´ì€ ìŒë”°ì˜´í‘œë¥¼ í•œ ë²ˆ ë” ë¶™ì—¬ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë”°ë¡œ ë¶„ë¥˜í–ˆë‹¤.
  }
```

<br/>

ê·¸ ë‹¤ìŒì€ íƒ€ì…ì´ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">ë°°ì—´(Array)</span>ì´ê³  ê·¸ ì•ˆì—ì„œ ë¹ˆ ë°°ì—´ì´ëƒ, ìš”ì†Œê°€ ìˆëƒë¡œ ë‚˜ëˆ„ì–´ì£¼ì—ˆë‹¤.

ìš”ì†Œê°€ ìˆì„ ê²½ìš°ëŠ” ëª¨ë“  ìš”ì†Œì— ì ‘ê·¼ì„ í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.

ê·¸ë¦¬ê³  <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">ëª¨ë“  ìš”ì†Œì— ì¬ê·€í•¨ìˆ˜ë¥¼ ì ìš©</span>ì‹œì¼œì£¼ì—ˆë‹¤. ê·¸ í›„ì— ë¬¸ìì—´ë¡œ ëœ ìš”ì†Œë“¤ì„ ìƒˆë¡œìš´ ë°°ì—´ì— pushë¥¼ í•´ì£¼ì—ˆë‹¤.

ì´ ë¶€ë¶„ì´ ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©ì˜ í•µì‹¬ì´ë©°, ê·¸ë¦¬ê³  ì§€ê¸ˆ êµ¬í˜„í•˜ê³ ì í•˜ëŠ” JSON í•¨ìˆ˜ì˜ í•µì‹¬ì´ë‹¤.

<br/>

```js
let resultArr = [];

if (Array.isArray(obj)) {
  if (obj.length === 0) {
    // ë¹ˆ ë°°ì—´ì¸ì§€ í™•ì¸
    return "[]";
  } else {
    for (let i = 0; i < obj.length; i++) {
      // ëª¨ë“  ìš”ì†Œì— ì¬ê·€í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤. ìš”ì†Œë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¾¸ê¸° ìœ„í•´ ì¬ê·€ baseë¡œ í–¥í•˜ê²Œ í•œë‹¤.
      let result = stringifyJSON(obj[i]);
      resultArr.push(result);
    }
    return `[${resultArr}]`; // ë°°ì—´ìì²´ë¥¼ ë¬¸ìì—´ í˜•íƒœë¡œ ë°˜í™˜í•œë‹¤.
  }
}
```

<br/>

ì´ì œ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">ê°ì²´(Object)</span>ì¼ ë•Œë¥¼ ìƒê°í•´ì•¼ í•œë‹¤. ê°ì²´ë„ ë°°ì—´ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, ë¨¼ì € ë¹ˆ ê°ì²´ì¸ì§€ í™•ì¸ì„ í•´ì£¼ì—ˆë‹¤.

ê·¸ í›„ì—, ê°ì²´ì˜ valueê°’ì´ function ì´ê±°ë‚˜ undefinedì¸ ê²½ìš° <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">delete</span>ë¥¼ í•´ì£¼ê³  <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">ì¬ê·€í•¨ìˆ˜ë¥¼ ì‹¤í–‰</span>í–ˆë‹¤. (JSON í•¨ìˆ˜ êµ¬í˜„ ë¬¸ì œì¤‘ì˜ í•˜ë‚˜ ì˜€ìŒ)

ê·¸ë¦¬ê³  ê°ì²´ì˜ ëª¨ë“  í‚¤ì™€ ê°’ì„ ë°˜ë³µë¬¸ìœ¼ë¡œ í™•ì¸í•´ì£¼ê³  ê° í‚¤ì™€ ê°’ì— ì¬ê·€í•¨ìˆ˜ë¥¼ ì ìš©í–ˆë‹¤.

ì½”ë“œë¥¼ ë³´ë©´.

```js
  //TODO: Object
  else {
    let recursiveArr = [];
    // ì¬ê·€í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•´ í• ë‹¹

    if (Object.keys(obj).length === 0) {  // ë¹ˆ ê°ì²´ í™•ì¸
      return "{}";
    } else {
      for (let key in obj) {
        // ëª¨ë“  í‚¤ì™€ ê°’ì— ì ‘ê·¼
        if (typeof obj[key] === "function" || obj[key] === undefined) {
          delete obj[key];
          stringifyJSON(obj);
          // í•„ìš”ì—†ëŠ” ë¶€ë¶„ì„ ì œê±°í•˜ê³  ë‹¤ì‹œ ì‹¤í–‰(ì¬ê·€)
        } else {
          // ëª¨ë“  í‚¤ì™€ ê°’ì„ í™•ì¸í•˜ê³  ì¬ê·€í•¨ìˆ˜ë¥¼ í†µí•´ ë¬¸ìì—´ë¡œ ë³€í™˜
          let vals = stringifyJSON(obj[key]);
          let keys = stringifyJSON(key);
          let resultObj = keys + ":" + vals;
          recursiveArr.push(resultObj);
          // ê°’ì„ ì €ì¥í•œë‹¤.
        }
      }
    }
    return `{${recursiveArr}}`;
    // ê°ì²´ ìì²´ë¥¼ ë¬¸ìì—´ë¡œ ë°˜í™˜í•œë‹¤.
  }
}
```

<br/>
<br/>

> stringify-JSON êµ¬í˜„ ì½”ë“œ
---

```js
function stringifyJSON(obj) {
  //TODO: recursive base
  if (typeof obj === "number" || obj === null || typeof obj === "boolean") {
    return "" + obj;
  } else if (typeof obj === "string") {
    return `"${obj}"`;
  }

  //TODO: Array
  let resultArr = [];

  if (Array.isArray(obj)) {
    if (obj.length === 0) {
      return "[]";
    } else {
      for (let i = 0; i < obj.length; i++) {
        let result = stringifyJSON(obj[i]);
        resultArr.push(result);
      }
      return `[${resultArr}]`;
    }
  }

  //TODO: Object
  else {
    let recursiveArr = [];

    if (Object.keys(obj).length === 0) {
      return "{}";
    } else {
      for (let key in obj) {
        if (typeof obj[key] === "function" || obj[key] === undefined) {
          delete obj[key];
          stringifyJSON(obj);
        } else {
          let vals = stringifyJSON(obj[key]);
          let keys = stringifyJSON(key);
          let resultObj = keys + ":" + vals;
          recursiveArr.push(resultObj);
        }
      }
    }

    return `{${recursiveArr}}`;
  }
}
```

## ğŸ‘‰ tree-UI êµ¬í˜„

ì˜¤ëŠ˜ì€ JSONë¿ë§Œ ì•„ë‹ˆë¼ ê¸°ì—…ìš© ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í”íˆ ë³¼ ìˆ˜ ìˆëŠ” <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">tree-UI(íŠ¸ë¦¬êµ¬ì¡°)</span>ì— ëŒ€í•´ì„œ ê³µë¶€ë¥¼ í•´ë³´ì•˜ë‹¤.

ì™„ì„±ëœ êµ¬ì¡°ë¥¼ ì‚´í´ë³´ë©´

![tree-UI](https://user-images.githubusercontent.com/75570915/107957275-baf7e680-6fe3-11eb-9900-4d6c636747d2.gif)

ê¸°ë³¸ì ì¸ menuëŠ” ë‹¤ ì‘ì„±ì´ ë˜ì–´ìˆê³ , ë‚˜ëŠ” íŠ¸ë¦¬êµ¬ì¡°ë¥¼ ë§Œë“¤ì–´ì¤„ í•¨ìˆ˜ë§Œ êµ¬í˜„í•˜ë©´ ë˜ëŠ” ë¬¸ì œì˜€ë‹¤.

ulìš”ì†Œì•ˆì— ë¶€ëª¨ ì—˜ë¦¬ë¨¼íŠ¸ëŠ” 4ê°€ì§€ (ìŒë£Œ, ìŒì‹, êµ¿ì¦ˆ, ì¹´ë“œ)liê°€ ìˆê³ , ê·¸ ì•ˆì— input íƒœê·¸ì™€ spaníƒœê·¸ ê·¸ë¦¬ê³  ìì‹ ì—˜ë¦¬ë¨¼íŠ¸ë¡œ ulì´ ë˜ ìˆëŠ” ê²½ìš°ê°€ ìˆë‹¤.

ìì‹ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ìˆìœ¼ë©´ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">ì¬ê·€í•¨ìˆ˜</span>ë¥¼ ì‚¬ìš©í•˜ê³ , ì—†ìœ¼ë©´ ê·¸ëŒ€ë¡œ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜</span>í•˜ëŠ” êµ¬ì¡°ì´ë‹¤.

<br/>

ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ìì‹ ìš”ì†Œê°€ ìˆëŠ”ì§€, ì—†ëŠ”ì§€ë¥¼ êµ¬ë¶„ì§€ì–´ì•¼ í•œë‹¤.

ë§Œì•½ ìì‹ìš”ì†Œê°€ ìˆë‹¤ë©´ ì¬ê·€í•¨ìˆ˜ë¥¼ ì¨ì£¼ì–´ì•¼ í•˜ê³ , ì—†ë‹¤ë©´ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

ë¨¼ì € ì¹´í…Œê³ ë¦¬ (ìŒë£Œ, ìŒì‹, êµ¿ì¦ˆ, ì¹´ë“œ) 4ê°€ì§€ë¥¼ ë Œë”ë§í•  4ê°œì˜ li ì—˜ë¦¬ë¨¼íŠ¸ê°€ ìˆì–´ì•¼ í•œë‹¤.

ì´ ê²½ìš° ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ, ë‚˜ëŠ” forEach ë‚´ì¥í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆë‹¤.

```js
menu.forEach(el => {
    if (el.type === "group") {
      // ëª¨ë“  1ì°¨ì› ê°ì²´ê°€ type: "group" ìœ¼ë¡œ ë¬¶ì—¬ìˆìŒ
      let li = document.createElement("li");
      currentNode.append(li);

      ...
```

<br/>

ê·¸ë¦¬ê³  ìì‹ìš”ì†Œë¡œ input, span, ul ì´ë ‡ê²Œ 3ê°€ì§€ê°€ ìˆëŠ”ë°, ì´ê²ƒë„ ë‹¤ ë§Œë“¤ì–´ì¤€ë‹¤.

ê·¸ í›„

```js
      let input = document.createElement("input");
      input.type = "checkbox";
      li.append(input);

      let span = document.createElement("span");
      span.textContent = el.name;
      li.append(span);

      let ul = document.createElement("ul");
      li.append(ul);

      createTreeView(el.children, ul);   // ìì‹ ìš”ì†Œê°€ ìˆìœ¼ë©´ëª¨ë“  ìš”ì†Œë“¤ì„ ì¬ê·€ì ìœ¼ë¡œ ìƒì„±í•œë‹¤.
    }
```

<br/>

ì¬ê·€ë¥¼ ëŒê³  ë§Œì•½ ìì‹ ìš”ì†Œê°€ ë”ì´ìƒ ì—†ë‹¤ë©´? í…ìŠ¤íŠ¸ë§Œ ë°˜í™˜í•œë‹¤.

```js
// ë”ì´ìƒ ìì‹ ìš”ì†Œê°€ ì—†ì„ ê²½ìš°
else {
      const li = document.createElement("li");
      li.textContent = el.name;
      currentNode.append(li);
    }
```

<br/>

> tree-UI êµ¬í˜„ ì½”ë“œ
---

```js
const root = document.getElementById("root");
function createTreeView(menu, currentNode) {
  // TODO: createTreeView í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ì„¸ìš”.

  menu.forEach(el => {
    if (el.type === "group") {
      let li = document.createElement("li");
      currentNode.append(li);

      let input = document.createElement("input");
      input.type = "checkbox";
      li.append(input);

      let span = document.createElement("span");
      span.textContent = el.name;
      li.append(span);

      let ul = document.createElement("ul");
      li.append(ul);

      createTreeView(el.children, ul);
    } else {
      const li = document.createElement("li");
      li.textContent = el.name;
      currentNode.append(li);
    }
  });
}

createTreeView(menu, root);
```

<br/>
<br/>

ì´ì œ ë‚´ì¼ì´ë©´ í”„ë¦¬ì½”ìŠ¤ ë§ˆì§€ë§‰ ë‚ ì´ë‹¤. ë§ˆì§€ë§‰ê¹Œì§€ í™”ì´íŒ…í•˜ì!!

> ğŸ‘Š **ë‚´ì¼ì˜ TIW(today I Will)**

ë‚ ì”¨ API

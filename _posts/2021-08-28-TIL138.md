---
layout: post
title: "순수 함수"
subtitle: "📅 TIL #138"
toc: true
toc_sticky: true
toc_label: "페이지 주요 목차"
date: 2021-08-08
background: "/img/posts/post-TIL.png"
tags: [TIL, js]
---

<br/>
<br/>
<br/>

# 🎯 Achievement Goals

> 1. 순수 함수의 개념
> 2. 순수 함수를 써야 하는 이유

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

나는 요새 Javascript Deep Dive 책을 산 후로, 개념들을 공부할 때 구글링보다는 책을 통해서 공부하게 된다. 확실히 이 책이 웬만한 블로그보다 자세하게 설명이 되어 있고 내부 구조와 같이 설명해주어서 이해가 잘 된다.

<br />
오늘 공부한 순수 함수도 이 책을 기반으로 공부를 했다. 책을 통해 공부한 내용을 쓰면서 정리하기 위해 블로그에 적어두려고 한다.

<br/>
<br/>
<br/>
<br/>

## 순수 함수의 개념

<br />
함수형 프로그래밍에서는 어떤 **외부 상태에 의존하지도 않고 변경하지도 않는**, 즉 부수 효과가 없는 함수를 순수 함수라 한다.

<br/>
순수 함수는 동일한 인수가 전달되면 언제나 동일한 값을 반환하는 함수다. 오직 매개변수를 통해 함수 내부로 전달된 인수에게만 의존해 반환값을 만든다. 다음 예시를 보면 이해가 잘 된다.

<br/>

```js
let count = 0;

function increase(n) {
  // 오직 매개변수에게만 의존한다.
  return n++;
}

// 순수 함수가 반환한 결과값을 재할당해서 상태를 변경
count = increase(count);
console.log(count); // 1;

count = increase(count);
console.log(count); // 2;
```

<br />
<br />
<br />
그렇다면 순수 함수가 아닌 경우는 어떤 경우일까? 반대로 외부 상태에 의존하는 경우라고 할 수 있다.

<br />

```js
let count = 0;

function increase() {
  // 외부 상태에 의존한다.
  return count++;
}

increase();
console.log(count); // 1;

increase();
console.log(count); // 2;
```

<br />

단순히 함수 내부에서 외부 상태를 직접 참조하지 않더라도 매개변수를 통해 객체를 전달받는 경우도 순수 함수라고 볼 수 없다.

<br/>
순수 함수는 외부 상태도 변경하지 않아야 하는데 객체를 전달 받았을 경우 외부 상태도 변경시키기 때문이다. 아래 예시를 보면 명확히 알 수 있다!

<br />

```js
let obj = { count: 0 };

function increase(obj, num) {
  // 객체를 전달 받은 경우
  return (obj.count += num);
}

console.log(increase(obj, 1)); // 1
console.log(increase(obj, 2)); // 3
// 외부 상태를 변경한 경우
console.log(obj.count); // 3
```

<br />
<br />

그렇다면 객체를 매개변수로 사용해야 하는데 순수 함수로 구현하려면 어떻게 해야할까?

<br />

```js
let obj = { count: 0 };

function increase(obj, num) {
  // 외부 상태를 참조만 하고 변경은 하지 않음
  return { count: obj.count + num };
}

console.log(obj); // { count: 0 }
const result = increase(obj, 1);

// 외부 상태 변경이 일어나지 않은 것을 확인할 수 있다.
console.log(obj); // { count: 0 }
console.log(result); // { count: 1 }
```

<br/>
<br/>
<br/>
<br/>

## 순수 함수를 써야 하는 이유

<br />
그렇다면 순수 함수를 왜 써야할까? 만약 함수가 외부 상태를 변경하면 상태 변화를 추적하기 어려워진다. 예제처럼 단순한 코드가 아니라 실제 개발 환경이라 생각하고, 이곳 저곳에서 외부 상태를 변경하게 된다면 엄청난 에러를 만나게 될 것라 생각된다...

<br />
그래서 순수 함수를 적극 사용하며 변수 사용을 억제하거나 생명주기를 최소화해서 상태 변경을 피해 오류를 최소화하는 것이 목표이다.

<br />
결국 이러한 노력들이 부수 효과를 최대한 억제해서 오류를 피하고 프로그램의 안정성을 높히는 것이라고 할 수 있다. 또 재사용성까지 좋아져서 좋은 코드가 탄생할 것이다.

<br/>
<br/>
<br/>
<br/>
<br/>

참고 자료

[모던 자바스크립트 Deep Dive p.187]()<br/>

<br/>
<br/>
<br/>
<br/>

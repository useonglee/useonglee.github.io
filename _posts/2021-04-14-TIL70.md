---
layout: post
title: "HTTPS, Hashing, Cookie"
subtitle: "π“… TIL #70"
toc: true
toc_sticky: true
toc_label: "νμ΄μ§€ μ£Όμ” λ©μ°¨"
date: 2021-04-14
background: "/img/posts/post-TIL.png"
tags: [TIL, immersive-course, frontend, backend]
---

<br/>
<br/>

# <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">π― Achievement Goals</span>

<br/>
- HTTPμ™€ HTTPSμ μ°¨μ΄μ μ„ μ΄ν•΄ν•  μ μλ‹¤.
- μ•”νΈν™”μ™€ hashing, salting λ“±μ κ°λ…μ„ μ΄ν•΄ν•  μ μλ‹¤.
- κ¶ν• λ¶€μ—¬(Authorization)μ™€ μΈμ¦(Authentication)μ— λ€ν•΄ μ΄ν•΄ν•  μ μλ‹¤.
- μΏ ν‚¤μ μ‘λ™ μ›λ¦¬λ¥Ό μ΄ν•΄ν•  μ μλ‹¤

<br/>
<br/>
<br/>
<br/>

## π‘‰ HTTPS

<br/>

![https](https://user-images.githubusercontent.com/75570915/114693956-10871000-9d55-11eb-9a37-de25394bac5e.png){: width="100%" height="100%"}

<br/>

<span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">HTTPSλ” HTTPλ¥Ό μ•μ „ν•κ² λ§λ“λ” λ°©μ‹μ΄λ‹¤</span>

> HTTP

* μΈν„°λ„· μƒμ—μ„ μ •λ³΄λ¥Ό μ£Όκ³  λ°›κΈ° μ„ν• ν”„λ΅ν† μ½(ν†µμ‹ κ·μ•½)
* ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ— μ΄λ£¨μ–΄μ§€λ” μ”μ²­/μ‘λ‹µ ν”„λ΅ν† μ½
* μ•”νΈν™”λμ§€ μ•μ€ λ°©λ²•μΌλ΅ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ‹¤.(μ•…μμ μΌλ΅ μ΄μ© κ°€λ¥)

> HTTPS

* λ³΄μ•μ΄ κ°•ν™”λ HTTP μ΄λ‹¤.
* Hypertext Transfer Protocol Over Secure Socket Layerμ μ•½μ
* λ¨λ“  HTTP μ”μ²­κ³Ό μ‘λ‹µ λ°μ΄ν„°λ” λ„¤νΈμ›ν¬λ΅ λ³΄λ‚΄μ§€κΈ° μ „μ— μ•”νΈν™”ν•λ‹¤.

<br/>
<br/>
<br/>

## π‘‰ HTTPS μ‚¬μ„¤ μΈμ¦μ„ λ°κΈ‰ λ° μ„λ²„ κµ¬ν„

<br/>

`mkcert`λΌλ” ν”„λ΅κ·Έλ¨μ„ μ΄μ©ν•΄μ„ λ΅μ»¬ ν™κ²½μ— μ‹ λΆ°ν•  μ μλ” μΈμ¦μ„λ¥Ό λ§λ“¤ μ μλ‹¤.

<br/>

```js
//Ubuntu
$ sudo apt install libnss3-tools
$ wget -O mkcert 
https://github.com/FiloSottile/mkcert/releases/download/v1.4.3/mkcert-v1.4.3-linux-amd64
$ chmod +x mkcert
$ sudo cp mkcert /usr/local/bin/

// μΈμ¦μ„ μƒμ„±
$ mkcert -install
$ mkcert -key-file key.pem -cert-file cert.pem localhost 127.0.0.1 ::1

```

<br/>

> HTTPS μ„λ²„ μ‘μ„±

```js
// express.js μ‚¬μ©
const https = require('https');
const fs = require('fs');
const express = require('express');

const app = express();

https
  .createServer(
    {
      key: fs.readFileSync(__dirname + '/key.pem', 'utf-8'),
      cert: fs.readFileSync(__dirname + '/cert.pem', 'utf-8'),
    },
    app.use('/', (req, res) => {
      res.send('hi, useonglee~ :)');
    })
  )
  .listen(3001);
```

<br/>
<br/>
<br/>


## π‘‰ Hashing

<br/>

μ•”νΈν™”λ” μΌλ ¨μ μ •λ³΄λ¥Ό μ„μμ λ°©μ‹μ„ μ‚¬μ©ν•μ—¬ λ‹¤λ¥Έ ν•νƒλ΅ λ³€ν™ν•κ³ , ν•΄λ‹Ή λ°©μ‹μ— λ€ν• μ •λ³΄λ¥Ό <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">μ†μ ν• μ‚¬λμ„ μ μ™Έν•κ³  μ΄ν•΄ν•  μ μ—†λ„λ΅</span> μ •λ³΄λ¥Ό κ΄€λ¦¬ν•λ” κ³Όμ •μ΄λ‹¤.

<br/>

`Hashing`μ€,

1. λ¨λ“  κ°’μ— λ€ν•΄ ν•΄μ‹ κ°’μ„ κ³„μ‚°ν•λ”λ° μ¤λ κ±Έλ¦¬μ§€ μ•μ•„μ•Ό ν•λ‹¤.
2. λ¨λ“  κ°’μ€ κ³ μ ν• ν•΄μ‹ κ°’μ„ κ°€μ Έμ•Ό ν•λ‹¤.
3. μ•„μ£Ό μ‘μ€ λ‹¨μ„μ λ³€κ²½μ΄λΌλ„ μ™„μ „ν λ‹¤λ¥Έ ν•΄μ‹ κ°’μ„ κ°€μ Έμ•Ό ν•λ‹¤.

<br/>


![ν•΄μ‹±](https://user-images.githubusercontent.com/75570915/114698519-25b26d80-9d5a-11eb-9c62-d25475db1fac.png)

<br/>

`Salt`λ” μ•”νΈν™”ν•΄μ•Ό ν•λ” κ°’μ— <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">λ³„λ„μ κ°’</span>μ„ μ¶”κ°€ν•μ—¬ κ²°κ³Όλ¥Ό λ³€ν•ν•λ” κ²ƒμ΄λ‹¤.

1. μ•”νΈν™”λ§ ν•΄λ†“λ”λ‹¤λ©΄ ν•΄μ‹λ κ²°κ³Όκ°€ λ κ°™λ‹¤.

2. μ›λ³Έκ°’μ— μ„μλ΅ μ•½μ†λ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">λ³„λ„μ λ¬Έμμ—΄</span>μ„ μ¶”κ°€ν•μ—¬ κΈ°μ΅΄ ν•΄μ‹κ°’κ³Ό μ „ν€ λ‹¤λ¥Έ ν•΄μ‹ κ°’μ΄ λ°ν™λμ–΄ λ…Έμ¶λλ”λΌλ„ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">μ›λ³Έκ°’μ„ λ³΄νΈν•  μ μλ„λ΅ ν•λ” μ•μ „μ¥μΉ</span>μ΄λ‹¤.

3. κΈ°μ΅΄: (μ•”νΈν™” ν•λ ¤λ” κ°’) => (hash κ°’)<br/>
   salt: (μ•”νΈν™” ν•λ ¤λ” κ°’) + (salt κ°’) => (hash κ°’)

<br/>

![salt](https://user-images.githubusercontent.com/75570915/114699344-226bb180-9d5b-11eb-9092-137ce40d410e.png)

<br/>
<br/>
<br/>

## π‘‰ Cookie

<br/>
Cookieλ” μ„λ²„κ°€ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">μ›Ή λΈλΌμ°μ €μ— μ •λ³΄λ¥Ό μ €μ¥</span>ν•κ³  λ¶λ¬μ¬ μ μλ” μλ‹¨μ΄λ‹¤.

ν•΄λ‹Ή λ„λ©”μΈμ— λ€ν•΄ μΏ ν‚¤κ°€ μ΅΄μ¬ν•λ©΄, μ›Ή λΈλΌμ°μ €λ” λ„λ©”μΈμ—κ² http μ”μ²­ μ‹ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">μΏ ν‚¤λ¥Ό ν•¨κ» μ „λ‹¬</span>ν•λ‹¤.

<br/>

![cookie](https://user-images.githubusercontent.com/75570915/114700436-77f48e00-9d5c-11eb-8be3-05213008bd0f.png)

<br/>

ν•μ§€λ§ λ°μ΄ν„°λ¥Ό μ €μ¥ν• μ΄ν›„ μ•„λ¬΄ λ•λ‚ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¬ μ μ—†λ‹¤. λ°μ΄ν„°λ¥Ό μ €μ¥ν• μ΄ν›„ <span style ="background-color:#4e5357; color:#f2b810; border-radius:4px; padding:2px">νΉμ • μ΅°κ±΄λ“¤μ΄ λ§μ΅±</span>ν•λ” κ²½μ°μ—λ§ λ‹¤μ‹ κ°€μ Έμ¬ μ μλ‹¤.

<br/>

![cookieOptions](https://user-images.githubusercontent.com/75570915/114700438-788d2480-9d5c-11eb-96f9-74a472ca9e3f.png)

<br/>
<br/>

![sameSite](https://user-images.githubusercontent.com/75570915/114700440-7925bb00-9d5c-11eb-9e7e-564d1588ec9a.png)

<br/>
<br/>

> express-session μΏ ν‚¤ μ„¤μ •

```js
// μ¤λ λ‚΄κ°€ μ‚¬μ©ν• μΏ ν‚¤ μ„¤μ •μ΄λ‹¤.
app.use(
  session({
    secret: '@useonglee',
    resave: false,
    saveUninitialized: true,
    cookie: {
      domain: 'localhost',
      path: '/',
      maxAge: 24 * 6 * 60 * 10000,
      sameSite: 'none',
      httpOnly: true,
      secure: true,
    },
  })
);
```

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>


## π™ λλ‚€μ 

<br/>
μ¤λ μ›Ήμ— λ€ν•΄μ„ λ” κΉμ€ κ³µλ¶€λ¥Ό ν•μ€λ”λ°, μƒκ°λ³΄λ‹¤ μ΄λ΅ λ“¤μ΄ μ¬λ°μ–΄μ„ μΆ‹μ•λ‹¤. κ·Έλ¦¬κ³  express-session λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•΄μ„ POST/login μ”μ²­κ³Ό POST/logout μ”μ²­ APIλ¥Ό κµ¬ν„ν–λ”λ° μ–΄μ  λ‚΄κ°€ νΌμ κ³µλ¶€ν–λ λ‚΄μ©κ³Ό λΉ„μ·ν•κΈ°λ΅ ν–κ³ , μ‰½κ² κµ¬ν„ν•  μ μλ” λ¬Έμ λ“¤μ΄μ—¬μ„ κ³Όμ λ¥Ό μ λ§λ¬΄λ¦¬ν•  μ μμ—λ‹¤!! μ—”μ§€λ‹μ–΄λ¶„λ“¤λ„ μ›Ή μΈμ¦μ— λ€ν•΄μ„ μ •λ§ μ¤‘μ”ν•λ‹¤κ³  κ°•μ΅°ν•μ…¨κ³ , λ‹¤μμ£Ό H.A μ‹ν—μ—λ„ μΈμ¦ κµ¬ν„ λ¶€λ¶„μ΄ κ°€μ¥ λ§μ΄ λ‚μ¬ κ²ƒ κ°™λ‹¤λ” μ΄μ•ΌκΈ°λ¥Ό λ“¤μ—μΌλ‹ μ£Όλ§μ— λ³µμµμ„ ν†µν•΄ μ™„λ²½ν λ‹¤λ¤„λ³΄μ!

<br/>
<br/>
<br/>
<br/>

> π‘ **λ‚΄μΌμ TIW(today I Will)**

Token

<br/>
<br/>
<br/>
